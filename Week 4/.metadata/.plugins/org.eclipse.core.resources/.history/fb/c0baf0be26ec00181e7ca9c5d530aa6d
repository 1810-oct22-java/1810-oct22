/**
 * 
 */

window.onload = function() {
    loadHomeView();
    $('#homeNav').on('click',loadHomeView);
    $('#charactersNav').on('click',loadCharactersView);
}

function loadHomeView() {
	
	var xhr = new XMLHttpRequest();
	
	xhr.onreadystatechange = function() {
		if(xhr.readyState == 4 && xhr.status == 200) {
			//do things w/ response
			$('#view').html(xhr.responseText);
		}
	}
	xhr.open("GET", "home.view", true);
	xhr.send();
	
}

function loadCharactersView() {
	var xhr = new XMLHttpRequest();

	xhr.onreadystatechange = function() {
		if (xhr.readyState == 4 && xhr.status == 200) {
			// do things w/ response
			$('#view').html(xhr.responseText);
			// manipulate Genre view
			getGenres();
			$('#addGenre').on('click', addGenre);
		}
	}
	xhr.open("GET", "character.view", true);
	xhr.send();
		
}

function getCharacters() {
	var xhr = new XMLHttpRequest();
	
	xhr.onreadystatechange = function() {
		if(xhr.readyState == 4 && xhr.status == 200) {
			console.log(xhr.responseText);
			let chars = JSON.parse(xhr.responseText);
			for (let c of chars) {
				var li = $(`<li>${c.name}<li>`);
				$('#charList').append(li);
			}
		}
	}
	xhr.open("GET","chars");
	xhr.send();
}

