/**
 * 
 */

window.onload = function() {
    loadHomeView();
    $('#homeNav').on('click',loadHomeView);
    $('#charNav').on('click',loadCharactersView);
    useTheForce();
}

function loadHomeView() {
	
	var xhr = new XMLHttpRequest();
	
	xhr.onreadystatechange = function() {
		if(xhr.readyState == 4 && xhr.status == 200) {
			//do things w/ response
			$('#view').html(xhr.responseText);
		}
	}
	xhr.open("GET", "home.view", true);
	xhr.send();
	
}

function loadCharactersView() {
	var xhr = new XMLHttpRequest();

	xhr.onreadystatechange = function() {
		if (xhr.readyState == 4 && xhr.status == 200) {
			// do things w/ response
			$('#view').html(xhr.responseText);
		}
	}
	xhr.open("GET", "characters.view", true);
	xhr.send();
		
}

function useTheForce() {
    var xhr = new XMLHttpRequest();
    
    xhr.onreadystatechange = function(){
        console.log(xhr.readyState);
        if(xhr.readyState == 4 && xhr.status == 200) {
            console.log(xhr.responseText);
            globalperson = JSON.parse(xhr.responseText);
            $('#output').html(JSON.parse(xhr.responseText).name);
        }
    }

    //STEP 3- open request
    var id = $('#swId').val();
    var type = $('#swType').val();
    var url = `https://swapi.co/api/${type}/${id}/`;

    xhr.open('GET',url,true);

    xhr.send();

    console.log("SENT REQUEST " + xhr.responseText); // `SENT REQUEST ${xhr.responseText}`

}

function getInfo() {
	
	var xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		
		if(xhr.readyState == 4 && xhr.status == 200) {

			let starwars = JSON.parse(xhr.responseText);
			console.log(starwars.name);
			$('#output').html(starwars.name);

       }
   }

	var swtype = $('#dataType').val();
	var typeid = $('#typeID').val();
	var url = `https://swapi.co/api/`+ swtype + `/` + typeid;
	console.log(url);
	xhr.open('GET', url, true);

	xhr.send(); 

}

function loadInfoViews() {
	
	var xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function () {
		
		if(xhr.readyState == 4 && xhr.status == 200) {
			
			$('#view').html(xhr.responseText);
			
		}
		
	}
	
	xhr.open("GET", "info.view", true);
	xhr.send();
	
	
}

